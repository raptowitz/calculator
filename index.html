<!DOCTYPE html>
<html>
    <head>
        <title>Calculator</title>
        <style>
            .display{
                outline: 1pt solid black;
                height: 30px;
            }
        </style>
    </head>
    <body>
        <div class = "display">0</div>
        <button class = "number" value = 0>0</button>
        <button class = "number" value = 1>1</button>
        <button class = "number" value = 2>2</button>
        <button class = "number" value = 3>3</button>
        <button class = "number" value = 4>4</button>
        <button class = "number" value = 5>5</button>
        <button class = "number" value = 6>6</button>
        <button class = "number" value = 7>7</button>
        <button class = "number" value = 8>8</button>
        <button class = "number" value = 9>9</button>
        <button class = "operator" value = addition>+</button>
        <button class = "operator" value = subtraction>-</button>
        <button class = "operator" value = multiplication>x</button>
        <button class = "operator" value = division>/</button>
        <button class = "operate">=</button>
        <button class = "clear">AC</button>
        <button class = "number" id = "decimal" value = .>.</button>

        <script>
            let display = document.querySelector(".display");

             let calculator = {
                addition: function add(a,b){
                    return (a*1) + (b*1);
                },
                subtraction: function subtract(a,b){
                    return a-b;
                },
                multiplication: function multiply(a,b){
                    return a*b;
                },
                division: function divide(a,b){
                     if (Number(b) === 0){
                         return display.textContent = "NOPE";
                    } else {
                         return a/b;
                    }
                },
            };

            function operate(operator, a, b){
                return operator(a,b);
            }

            let firstNum = "";
            let secondNum = "";
            let operator = "";
            let result = "";

            let numbers = document.querySelectorAll(".number");
            numbers.forEach(button => button.addEventListener("click", (e)=>{

                if (operator === ""){
                    //remove leading zeros
                    if(firstNum.indexOf("0") === 0){
                        firstNum = firstNum.slice(1);
                    }
                    firstNum += e.target.value;
                    //turn decimal off
                    if(firstNum.indexOf(".") !== -1){
                    document.getElementById("decimal").disabled = true;
                    }
                    display.textContent = firstNum
                
                    console.log("firstNum is ", firstNum)
                }
                else {
                    //remove leading zeros
                    if(secondNum.indexOf("0") === 0){
                        secondNum = secondNum.slice(1);
                    }
                    secondNum += e.target.value;
                    //turn decimal off
                    if(secondNum.indexOf(".") !== -1){
                    document.getElementById("decimal").disabled = true;
                    }
                    display.textContent = secondNum;

                    console.log("secondNum is ", secondNum)
                }
            }));

            let operators = document.querySelectorAll(".operator");
            operators.forEach(button => button.addEventListener("click", (e)=>{
                //turn decimal on 
                document.getElementById("decimal").disabled = false;

                //if user presses another operator before =
                if(firstNum !== "" & secondNum !== ""){
                    result = operate(operator, firstNum, secondNum);
                    display.textContent = result;
                    firstNum = result;
                    secondNum = ""

                    console.log("edge 1")
                }
                //if user wants to operate on consecutive results
                else if(result !== "0" && result !== "NOPE" && firstNum === ""){
                    firstNum = result;
                    secondNum = ""

                    console.log("edge 2")
                }
    
                operator = calculator[e.target.value];

                console.log("operator is ", operator)
                console.log("firstNum is ", firstNum)
            }));

            let calculate = document.querySelector(".operate");
            calculate.addEventListener("click", () => {
                //turn decimal on 
                document.getElementById("decimal").disabled = false;

                //if user presses = before entering second number
                if(secondNum === ""){
                    secondNum = firstNum;
                }
                result = operate(operator, firstNum, secondNum);
                display.textContent = result;
                firstNum = "";
                secondNum = "";
                operator = "";

                console.log("result is ", result)
                console.log("firstNum is ", firstNum)
                console.log("secondNum is ", secondNum)
                
            });

            let clear = document.querySelector(".clear")
            clear.addEventListener("click", () =>{
                //turn decimal on 
                document.getElementById("decimal").disabled = false;
                firstNum = "";
                secondNum = "";
                operator = "";
                result = "";
                display.textContent = 0;
            });
            
            




        </script>
    </body>
</html>